
@model IEnumerable<MonitoringConfigurator.Models.Product>
@{
    ViewData["Title"] = "Produkty – Zarządzanie";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var search = ViewBag.Search as string;
}


<style>
/* Skalowanie przycisków edycji/zarządzania */
.btn-action{font-weight:600;border-radius:999px;padding:.45rem .9rem}
@@media (min-width:576px){.btn-action{padding:.5rem 1rem}}
@@media (min-width:768px){.btn-action{padding:.55rem 1.05rem}}
@@media (min-width:992px){.btn-action{padding:.6rem 1.15rem}}
.btn-action i{margin-right:.35rem}
</style>

<div class="d-flex justify-content-between align-items-center mb-3">
  <h2 class="m-0">Produkty</h2>
  <div class="d-flex gap-2">
    <form method="get" class="d-flex">
      <input type="text" name="search" value="@search" class="form-control" placeholder="Szukaj..." />
      <button class="btn btn-outline-secondary ms-2" type="submit">Szukaj</button>
    </form>
    <a href="@Url.Action("Create","Products")" class="btn btn-success btn-action"><i class="bi bi-plus-circle"></i> Dodaj</a>
  </div>
</div>

<div class="table-responsive">
<table class="table table-hover align-middle">
  <thead class="table-light">
    <tr>
      <th>ID</th>
      <th>Nazwa</th>
      <th>Producent</th>
      <th>Model</th>
      <th>Kategoria</th>
      <th class="text-end">Cena</th>
      <th class="text-end">Stan</th>
      <th class="text-end">Akcje</th>
    </tr>
  </thead>
  <tbody>
    @foreach (var p in Model)
    {
      <tr>
        <td>@p.Id</td>
        <td class="fw-semibold"><a href="@Url.Action("Details","Products", new { id = p.Id })" class="text-decoration-none">@p.Name</a></td>
        <td>@p.Brand</td>
        <td>@p.Model</td>
        <td>@p.Category</td>
        <td class="text-end">@p.Price.ToString("0.00")</td>
        <td class="text-end">@p.Stock</td>
        <td class="text-end">
          <a class="btn btn-outline-primary btn-action" href="@Url.Action("Edit","Products", new { id = p.Id })">
            <i class="bi bi-pencil"></i> Edytuj
          </a>
          <form action="@Url.Action("Delete","Products")" method="post" class="d-inline">
            @Html.AntiForgeryToken()
            <input type="hidden" name="id" value="@p.Id" />
            <button type="submit" class="btn btn-outline-danger btn-action" onclick="return confirm('Usunąć produkt?');">
              <i class="bi bi-trash"></i> Usuń
            </button>
          </form>
        </td>
      </tr>
    }
  </tbody>
</table>
</div>
